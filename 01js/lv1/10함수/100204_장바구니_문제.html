<script>

  /*
    [문제1]
    회원별로 아이템 구매목록을 출력하시오.
  [정답1]
    [이만수 ==> 고래밥3,칸쵸1] 
    [김철민 ==> 고래밥1] 
    [이영희 ==> 고래밥1,새우깡2]
  
  [문제2]
    아이템별로 판매개수를 출력하시오.
  [정답2]
    [고래밥 ==> 5][새우깡 ==> 2][칸쵸 ==> 1]
  */

function tokenData(data, separator) {
  let list = [];

  let token = data.split(separator);
  for(let i=0; i<token.length; i++) {
    let temp = token[i].split("/");
    list.push(temp);
  }
  return list;
}

function shoppingList(userList, itemList, cartList) {
  let result = [];
  for(let i=0; i<userList.length; i++) {
    let info = [userList[i][1]];
    for(let j=0; j<itemList.length; j++) {
      let count = 0;
      for(let k=0; k<cartList.length; k++) {
        if(userList[i][0] == cartList[k][0] && itemList[j][0] ==cartList[k][1]) {
          count += 1;
        }
      }
      info.push(count);
    }
    result.push(info);
  }
  return result;
}

function countList(resultList) {
  let totalList = [];
  for(let i=1; i<resultList[0].length; i++) {
    let total = 0;
    for(let j=0; j<resultList.length; j++) {
      total += resultList[j][i];
    }
    totalList.push(total);
  }
  return totalList;
}

function printData(data) {
  for(let i=0; i<data.length; i++) {
    document.write(data[i] + "<br>");
  }
  document.write("<br>");
}

let itemData = "1001/고래밥,1002/새우깡,1003/칸쵸";
let userData = "3001/이만수,3002/김철민,3003/이영희";

let cartData = "";
cartData += "3001/1001\n";
cartData += "3001/1001\n";
cartData += "3003/1002\n";
cartData += "3001/1001\n";
cartData += "3001/1003\n";
cartData += "3003/1002\n";
cartData += "3003/1001\n";
cartData += "3002/1001\n";

let itemList = [];
let userList = [];
let cartList = [];

let rs1 = [];

itemList = tokenData(itemData, ",");
userList = tokenData(userData, ",");
cartList = tokenData(cartData, "\n");

rs1 = shoppingList(userList, itemList, cartList);
printData(rs1);

rs2 = countList(rs1);
document.write(rs2);

</script>